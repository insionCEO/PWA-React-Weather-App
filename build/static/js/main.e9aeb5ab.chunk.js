(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{21:function(t,e,n){"use strict";n.r(e);var a,i=n(0),r=n(1),o=n.n(r),c=n(13),s=n.n(c),u=n(6),l=n.n(u),h=n(8),d=n(11),p=n(2),f=n(3),y=n(7),b=n(5),m=n(4),j=n(9),v=n(23),g=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("p",{className:"forecast__temperature",children:[this.props.temperature,Object(i.jsx)("span",{className:"temperature__unit-dot"})]})}}]),n}(r.PureComponent),w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(new Date).getTime(),a={};function i(){(new Date).getTime()-n>=e?t.call():a.value=requestAnimationFrame(i)}return a.value=requestAnimationFrame(i),a},O=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).forecast=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.forecast.current.classList.add("animate-in")}),100),w((function(){return t.title.classList.add("animate-in")}),200),w((function(){return t.icon.classList.add("animate-in")}),250),w((function(){t.temperature.map((function(t){return t.classList.add("animate-in")}))}),350),w((function(){return t.rain.classList.add("animate-in")}),300)}},{key:"componentDidMount",value:function(){var t=this;this.title=this.forecast.current.querySelector(".forecast__title"),this.icon=this.forecast.current.querySelector(".forecast__icon"),this.temperature=Object(j.a)(this.forecast.current.querySelectorAll(".forecast__temperature")),this.rain=this.forecast.current.querySelector(".rain"),w((function(){return t.animate()}),100*this.props.animationDelay)}},{key:"render",value:function(){return Object(i.jsxs)("div",{ref:this.forecast,className:"forecast","data-id":this.props.id,children:[Object(i.jsx)("span",{className:"forecast__title",children:this.props.title}),Object(i.jsx)("img",{className:"forecast__icon",alt:"icon",src:this.props.icon}),this.props.children]})}}]),n}(r.PureComponent),x=n.p+"static/media/rain-probality.b7a9b35c.svg",k=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{className:"rain",children:[Object(i.jsx)("img",{width:"24",height:"24",className:"rain__icon",src:x,alt:"rain probability ".concat(this.props.probability)}),Object(i.jsx)("span",{className:"rain__probability",children:"".concat(this.props.probability,"%")})]})}}]),n}(r.PureComponent),C=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(i.jsx)("section",{className:"forecasts__period swiper-slide",children:this.props.foreCastHourly.map((function(t,e){return Object(i.jsxs)(O,{id:"hourly-".concat(e),title:"".concat(t.time,":00"),icon:t.icon,animationDelay:e,children:[Object(i.jsx)(g,{temperature:t.temperature}),Object(i.jsx)(k,{probability:t.rainProbability})]},"hourly-".concat(e))}))})}}]),n}(r.PureComponent),L=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(i.jsx)("section",{className:"forecasts__period forecasts--daily swiper-slide",children:this.props.foreCastDaily.map((function(t,e){return Object(i.jsxs)(O,{id:"daily-".concat(e),title:t.weekDay,icon:t.icon,animationDelay:e,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(g,{temperature:t.temperature.max}),Object(i.jsx)(g,{temperature:t.temperature.min})]}),Object(i.jsx)(k,{probability:t.rainProbability})]},"daily-".concat(e))}))})}}]),n}(r.PureComponent),_=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).icon=o.a.createRef(),t.text=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.icon.current.classList.add("animate-in")}),250),w((function(){return t.text.current.classList.add("animate-in")}),350)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),1e3)}},{key:"render",value:function(){return Object(i.jsxs)("section",{className:"location",children:[Object(i.jsx)("span",{ref:this.icon,className:"location__icon",children:Object(i.jsx)("svg",{enableBackground:"new 0 0 24 24",height:"24px",id:"location",version:"1.1",viewBox:"0 0 24 24",width:"24px",children:Object(i.jsx)("path",{d:"M11.513,12.38c-2.117,0-3.835-1.729-3.835-3.862c0-2.135,1.718-3.863,3.835-3.863s3.835,1.729,3.835,3.863  C15.348,10.65,13.63,12.38,11.513,12.38 M11.513,0C6.825,0,3.025,3.827,3.025,8.549c0,4.46,3.844,10.213,6.411,13.014  c0.959,1.045,2.076,2.454,2.076,2.454s1.2-1.417,2.229-2.493C16.306,18.84,20,13.451,20,8.549C20,3.827,16.2,0,11.513,0"})})}),Object(i.jsx)("span",{ref:this.text,className:"location__text",children:this.props.location})]})}}]),n}(r.PureComponent),P=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).status=o.a.createRef(),t.value=o.a.createRef(),t.unit=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.status.current.classList.add("animate-in")}),150),w((function(){return t.value.current.classList.add("animate-in")}),250),w((function(){return t.unit.current.classList.add("animate-in")}),300)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),400)}},{key:"render",value:function(){return Object(i.jsx)("section",{className:"current-condition",children:Object(i.jsxs)("div",{className:"wrapper-temperature",children:[Object(i.jsx)("span",{ref:this.status,className:"temperature__status",children:this.props.weather}),Object(i.jsxs)("div",{className:"temperature",children:[Object(i.jsx)("span",{ref:this.value,className:"temperature__value",children:this.props.temperature}),Object(i.jsxs)("div",{ref:this.unit,className:"temperature__unit",children:[Object(i.jsx)("span",{className:"temperature__unit-dot"}),Object(i.jsx)("span",{className:"temperature__unit-letter",children:"c"})]})]})]})})}}]),n}(r.PureComponent),M=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).navigation=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){t.dots.map((function(t,e){return w((function(){return t.classList.add("animate-in")}),150*e),t}))}),350)}},{key:"componentDidMount",value:function(){var t=this;this.dots=Object(j.a)(this.navigation.current.querySelectorAll(".navigation__dot")),w((function(){return t.animate()}),350)}},{key:"render",value:function(){return Object(i.jsxs)("section",{ref:this.navigation,className:"navigation ".concat(this.props.currentForecast),children:[Object(i.jsx)("div",{className:"navigation__dot"}),Object(i.jsx)("div",{className:"navigation__dot"})]})}}]),n}(r.PureComponent),D=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).button=o.a.createRef(),t.onMouseDown=t.onMouseDown.bind(Object(y.a)(t)),t.onMouseUp=t.onMouseUp.bind(Object(y.a)(t)),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.button.current.classList.add("animate-in")}),430)}},{key:"onMouseDown",value:function(){var t=this;w((function(){return t.button.current.classList.add("press")}),1)}},{key:"onMouseUp",value:function(){var t=this;w((function(){return t.button.current.classList.remove("press")}),1)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),350)}},{key:"render",value:function(){return Object(i.jsx)("button",{ref:this.button,type:"button",className:"gps-location","aria-label":"Get current location",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onClick:this.props.onGPSLocationClick,children:Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"gpslocation",viewBox:"0 0 96 96",children:Object(i.jsxs)("g",{id:"XMLID_1_",children:[Object(i.jsx)("circle",{id:"XMLID_3_",cx:"48",cy:"48",r:"9.8"}),Object(i.jsx)("path",{id:"XMLID_6_",d:"M80.5 44.8h-6.7C72.3 33 63 23.7 51.3 22.2v-6.7h-6.5v6.7C33 23.7 23.7 33 22.2 44.8h-6.7v6.5h6.7C23.7 63 33 72.3 44.8 73.8v6.7h6.5v-6.7C63 72.3 72.3 63 73.8 51.3h6.7v-6.5zM48 67.5c-10.8 0-19.5-8.7-19.5-19.5S37.2 28.5 48 28.5 67.5 37.2 67.5 48 58.8 67.5 48 67.5z"})]})})})}}]),n}(r.PureComponent),S=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).button=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.button.current.classList.add("animate-in")}),500)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),350)}},{key:"render",value:function(){return Object(i.jsx)("button",{ref:this.button,type:"button",className:"button-info","aria-label":"Information",onClick:this.props.onInfoClick,children:Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(i.jsx)("path",{d:"M12 0C5.371 0 0 5.371 0 12s5.371 12 12 12 12-5.371 12-12S18.629 0 12 0zm0 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 3.813c-.184 0-.336-.004-.5.03a1.127 1.127 0 0 0-.438.22.98.98 0 0 0-.28.375c-.071.152-.095.332-.095.562 0 .227.024.406.094.563.07.156.16.28.281.375.122.093.274.148.438.187.164.04.316.063.5.063.18 0 .371-.024.531-.063.16-.04.285-.094.406-.188a.951.951 0 0 0 .282-.375c.07-.152.125-.335.125-.562 0-.23-.055-.41-.125-.563a.98.98 0 0 0-.281-.375c-.122-.093-.247-.183-.407-.218-.16-.035-.351-.032-.531-.032zm-1.219 3.343v8.969h2.438V9.156z"})})})}}]),n}(r.PureComponent),I=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).text=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.text.current.classList.add("animate-in")}),400)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),350)}},{key:"render",value:function(){return Object(i.jsx)("section",{className:"date-current",children:Object(i.jsx)("span",{ref:this.text,className:"date-current__text",children:this.props.date})})}}]),n}(r.PureComponent),N=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).view=o.a.createRef(),t.button=o.a.createRef(),t.getClass=t.getClass.bind(Object(y.a)(t)),t.onMouseDown=t.onMouseDown.bind(Object(y.a)(t)),t.onMouseUp=t.onMouseUp.bind(Object(y.a)(t)),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.view.current.classList.add("animate-in")}),350)}},{key:"onMouseDown",value:function(){var t=this;w((function(){return t.button.current.classList.add("press")}),1)}},{key:"onMouseUp",value:function(){var t=this;w((function(){return t.button.current.classList.remove("press")}),1)}},{key:"componentDidMount",value:function(){var t=this;w((function(){return t.animate()}),350)}},{key:"getClass",value:function(t){var e=t.updating,n="";return this.view.current&&(n="animate-in"),"refresh ".concat(n," ").concat(e?"fetching":"")}},{key:"render",value:function(){return Object(i.jsxs)("section",{ref:this.view,className:"".concat(this.getClass(this.props)),children:[Object(i.jsx)("span",{className:"refresh__time",children:this.props.time}),Object(i.jsx)("button",{ref:this.button,type:"button",className:"button-refresh","aria-label":"Refresh content",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onClick:this.props.onClick,children:Object(i.jsx)("svg",{viewBox:"0 0 96 96",children:Object(i.jsx)("path",{d:"M48 15.5c-8.8 0-17 3.5-23 9.5l-6.3-6.3v19.5h19.5l-8.6-8.6C34.4 24.8 40.9 22 48 22c14.3 0 26 11.7 26 26S62.3 74 48 74 22 62.3 22 48h-6.5c0 17.9 14.6 32.5 32.5 32.5S80.5 65.9 80.5 48 65.9 15.5 48 15.5z"})})})]})}}]),n}(r.PureComponent),z=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).state={currentForecast:"hourly",forecastIndex:["hourly","daily"]},t}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.forecasts=Object(j.a)(document.querySelectorAll(".forecasts__period")),this.swiper=new v.a(".swiper-container",{direction:"horizontal",loop:!1}),this.swiper.on("slideChangeTransitionEnd",(function(){t.setState({currentForecast:t.state.forecastIndex[t.swiper.activeIndex]})}))}},{key:"render",value:function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(D,{onGPSLocationClick:this.props.onGPSLocationClick}),Object(i.jsx)(S,{onInfoClick:this.props.onInfoClick,onInfoClose:this.props.onInfoClose}),Object(i.jsx)(_,{location:this.props.currentCondition.location}),Object(i.jsx)(I,{date:this.props.currentCondition.date}),Object(i.jsx)(P,{weather:this.props.currentCondition.weather,temperature:this.props.currentCondition.temperature}),Object(i.jsx)(N,{onClick:this.props.onRefreshClick,updating:this.props.updating,time:this.props.lastUpdate}),Object(i.jsxs)("section",{className:"forecasts",children:[Object(i.jsx)("div",{className:"forecasts__scroll-panel swiper-container",children:Object(i.jsxs)("div",{className:"swiper-wrapper",children:[Object(i.jsx)(C,{foreCastHourly:this.props.foreCastHourly}),Object(i.jsx)(L,{foreCastDaily:this.props.foreCastDaily})]})}),Object(i.jsx)(M,{currentForecast:this.state.currentForecast})]})]})}}]),n}(r.PureComponent),G=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).button=o.a.createRef(),t}return Object(f.a)(n,[{key:"animate",value:function(){var t=this;w((function(){return t.button.current.classList.add("animate-in")}),1)}},{key:"hide",value:function(){var t=this;w((function(){return t.button.current.classList.remove("animate-in")}),1)}},{key:"render",value:function(){return Object(i.jsx)("button",{ref:this.button,type:"button",className:"button-close","aria-label":"Close view",onClick:this.props.onCloseClick,children:Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#fff",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:Object(i.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})}}]),n}(r.PureComponent),R=n.p+"static/media/github.5cb865b1.svg",F=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).transition=o.a.createRef(),t.view=o.a.createRef(),t.close=o.a.createRef(),t.onInfoClose=t.onInfoClose.bind(Object(y.a)(t)),t}return Object(f.a)(n,[{key:"onInfoClose",value:function(){var t=this;w((function(){return t.view.current.classList.remove("animate-in")}),1),w((function(){return t.close.current.hide()}),20),w((function(){return t.transition.current.classList.remove("animate-in")}),100),w((function(){t.props.onInfoClose()}),110)}},{key:"getStyle",value:function(t){var e=this;return t?(w((function(){return e.transition.current.classList.add("animate-in")}),1),w((function(){return e.close.current.animate()}),50),w((function(){e.view.current.classList.remove("hide"),e.view.current.classList.add("animate-in"),e.view.current.setAttribute("aria-hidden",!1)}),150),""):""}},{key:"render",value:function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)("div",{ref:this.transition,className:"transition"}),Object(i.jsxs)("section",{ref:this.view,className:"info ".concat(this.getStyle(this.props.show)),children:[Object(i.jsx)(G,{ref:this.close,onCloseClick:this.onInfoClose}),Object(i.jsx)("h1",{children:"About"}),Object(i.jsx)("p",{children:"PWA Weather Application made with React/Scss/ES6"}),Object(i.jsx)("p",{children:"This is a personal project built in my spare time for learning purposes."}),Object(i.jsx)("h2",{children:"APIs"}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsx)("a",{className:"link",href:"https://www.ipify.org",target:"_blank",rel:"noopener noreferrer",children:"Ipify (ip address)"})}),Object(i.jsx)("li",{children:Object(i.jsx)("a",{className:"link",href:"https://tools.keycdn.com/geo",target:"_blank",rel:"noopener noreferrer",children:"IP Location Finder by KeyCDN"})}),Object(i.jsxs)("li",{children:["Powered by ",Object(i.jsx)("a",{href:"https://www.weatherapi.com/",target:"_blank",rel:"noopener noreferrer",title:"Weather API",children:"WeatherAPI.com"})]})]}),Object(i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/iondrimba/react-weather-app",className:"github",title:"Github",children:Object(i.jsx)("img",{src:R,alt:"Github icon",width:"32",height:"32"})})]})]})}}]),n}(r.PureComponent),U=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).loader=o.a.createRef(),t.circle=o.a.createRef(),t.rays=[],t}return Object(f.a)(n,[{key:"_getCircle",value:function(){return this.circle.current?this.circle.current:document.querySelector(".loader__circle1")}},{key:"animateIn",value:function(){var t=this;this.animateCircle(),w((function(){return t.animateRays()}),300),w((function(){return t.startRotation()}),500)}},{key:"animateRays",value:function(){this.rays.map((function(t,e){return w((function(){return t.classList.add("animate-in")}),80*e),t}))}},{key:"startRotation",value:function(){var t=this;w((function(){return t._getCircle().classList.add("start-rotation")}),400)}},{key:"animateCircle",value:function(){var t=this;w((function(){return t._getCircle().classList.add("animate-in")}),150)}},{key:"animateOut",value:function(){var t=this;w((function(){return t._getCircle().classList.add("animate-out")}),550),this.rays.map((function(t,e){return w((function(){return t.classList.add("animate-out")}),50*e),t}))}},{key:"componentDidMount",value:function(){this.rays=Object(j.a)(this._getCircle().querySelectorAll(".ray"))}},{key:"render",value:function(){return Object(i.jsx)("div",{ref:this.loader,className:"loader",children:Object(i.jsx)("div",{ref:this.circle,className:"loader__circle",children:[0,1].map((function(t){return Object(i.jsxs)("div",{className:"rays",children:[Object(i.jsx)("div",{className:"ray ray--north"}),Object(i.jsx)("div",{className:"ray ray--west"}),Object(i.jsx)("div",{className:"ray ray--south"}),Object(i.jsx)("div",{className:"ray ray--east"})]},"ray_".concat(t))}))})})}}]),n}(r.PureComponent),T=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{className:"error",children:[Object(i.jsx)("h1",{children:":("}),"This application uses a free service from ",Object(i.jsx)("a",{target:"blank",rel:"noopener",href:"https://ipstack.com/",children:"https://ipstack.com/"})," and the current usage exceded the reach limit.",Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),"Please come back later."]})}}]),n}(r.PureComponent),H=function(){function t(e){Object(p.a)(this,t),this.endpoint=function(t){return"".concat("https://weather-api-iondrimba.vercel.app/api","?ip=").concat(t)},this.data=null,this.secret=e}return Object(f.a)(t,[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.endpoint(e));case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,this.data=a,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error("IpGeoLocation unable to fetch: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())}]),t}(),A=n(14),W=n.n(A),B=function(){function t(){Object(p.a)(this,t),this.ip="",this.endpoint="https://api.ipify.org/?format=json"}return Object(f.a)(t,[{key:"fetch",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(Object(h.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.endpoint);case 3:return e=t.sent,t.next=6,e.json();case 6:n=t.sent,this.ip=n.ip,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error("IpFetcher unable to fetch: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))))},{key:"isValid",value:function(){return W()().test(this.ip)}}]),t}(),q=function(t){return t<10?"0".concat(t):t},E=function(t){var e=new Date(1e3*t),n=e.getTime();return new Date(function(t,e){var n=e;return/GMT\+\d+/.test(t.toString())&&(n=e+6e4*t.getTimezoneOffset()),n}(e,n))},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=E(t),a=n.getFullYear(),i=n.getDay(),r=n.getMonth()+1,o=n.getDate(),c=n.getHours(),s=n.getMinutes();r=q(r),o=q(o),c=q(c),s=q(s);var u=n.toLocaleDateString(e,{weekday:"long",year:"numeric",month:"long",day:"numeric"});return{localeDateString:u,weekDay:i,day:o,month:r,year:a,hours:c,minutes:s}},V={1e3:{day:"Sunny",night:"Clear",icon:113},1003:{day:"Partly cloudy",night:"Partly cloudy",icon:116},1006:{day:"Cloudy",night:"Cloudy",icon:119},1009:{day:"Overcast",night:"Overcast",icon:122},1030:{day:"Mist",night:"Mist",icon:143},1063:{day:"Patchy rain possible",night:"Patchy rain possible",icon:176},1066:{day:"Patchy snow possible",night:"Patchy snow possible",icon:179},1069:{day:"Patchy sleet possible",night:"Patchy sleet possible",icon:182},1072:{day:"Patchy freezing drizzle possible",night:"Patchy freezing drizzle possible",icon:185},1087:{day:"Thundery outbreaks possible",night:"Thundery outbreaks possible",icon:200},1114:{day:"Blowing snow",night:"Blowing snow",icon:227},1117:{day:"Blizzard",night:"Blizzard",icon:230},1135:{day:"Fog",night:"Fog",icon:248},1147:{day:"Freezing fog",night:"Freezing fog",icon:260},1150:{day:"Patchy light drizzle",night:"Patchy light drizzle",icon:263},1153:{day:"Light drizzle",night:"Light drizzle",icon:266},1168:{day:"Freezing drizzle",night:"Freezing drizzle",icon:281},1171:{day:"Heavy freezing drizzle",night:"Heavy freezing drizzle",icon:284},1180:{day:"Patchy light rain",night:"Patchy light rain",icon:293},1183:{day:"Light rain",night:"Light rain",icon:296},1186:{day:"Moderate rain at times",night:"Moderate rain at times",icon:299},1189:{day:"Moderate rain",night:"Moderate rain",icon:302},1192:{day:"Heavy rain at times",night:"Heavy rain at times",icon:305},1195:{day:"Heavy rain",night:"Heavy rain",icon:308},1198:{day:"Light freezing rain",night:"Light freezing rain",icon:311},1201:{day:"Moderate or heavy freezing rain",night:"Moderate or heavy freezing rain",icon:314},1204:{day:"Light sleet",night:"Light sleet",icon:317},1207:{day:"Moderate or heavy sleet",night:"Moderate or heavy sleet",icon:320},1210:{day:"Patchy light snow",night:"Patchy light snow",icon:323},1213:{day:"Light snow",night:"Light snow",icon:326},1216:{day:"Patchy moderate snow",night:"Patchy moderate snow",icon:329},1219:{day:"Moderate snow",night:"Moderate snow",icon:332},1222:{day:"Patchy heavy snow",night:"Patchy heavy snow",icon:335},1225:{day:"Heavy snow",night:"Heavy snow",icon:338},1237:{day:"Ice pellets",night:"Ice pellets",icon:350},1240:{day:"Light rain shower",night:"Light rain shower",icon:353},1243:{day:"Moderate or heavy rain shower",night:"Moderate or heavy rain shower",icon:356},1246:{day:"Torrential rain shower",night:"Torrential rain shower",icon:359},1249:{day:"Light sleet showers",night:"Light sleet showers",icon:362},1252:{day:"Moderate or heavy sleet showers",night:"Moderate or heavy sleet showers",icon:365},1255:{day:"Light snow showers",night:"Light snow showers",icon:368},1258:{day:"Moderate or heavy snow showers",night:"Moderate or heavy snow showers",icon:371},1261:{day:"Light showers of ice pellets",night:"Light showers of ice pellets",icon:374},1264:{day:"Moderate or heavy showers of ice pellets",night:"Moderate or heavy showers of ice pellets",icon:377},1273:{day:"Patchy light rain with thunder",night:"Patchy light rain with thunder",icon:386},1276:{day:"Moderate or heavy rain with thunder",night:"Moderate or heavy rain with thunder",icon:389},1279:{day:"Patchy light snow with thunder",night:"Patchy light snow with thunder",icon:392},1282:{day:"Moderate or heavy snow with thunder",night:"Moderate or heavy snow with thunder",icon:395}},X=function(t){var e=V[t];return e?e.icon:V[1006].icon},K=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"][t];if(e)return e;throw new Error("No weekday found for index: ".concat(t))},Y=n(10),$={showInfo:!1,dataLoaded:!1,latitude:0,longitude:0,updating:!1,lastUpdate:"00:00",currentCondition:(a={location:"--",temperature:0,date:"--",weather:"Clear",dayTime:!1,humidity:0,dataLoaded:!1,foreCastDaily:[{weekDay:"mon",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"tue",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"wed",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"Thu",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"Fri",rainProbability:0,icon:"wi-fog",temperature:{max:0,min:0}}],foreCastHourly:[{time:0,rainProbability:0,temperature:23,icon:"wi-fog"},{time:0,rainProbability:0,temperature:25,icon:"wi-day-sunny"},{time:0,rainProbability:0,temperature:15,icon:"wi-day-sunny"},{time:0,rainProbability:0,temperature:16,icon:"wi-day-sunny"},{time:0,rainProbability:0,temperature:24,icon:"wi-day-sunny"}]},Object(Y.a)(a,"location","S\xe3o Paulo"),Object(Y.a)(a,"date","Sunday, August 12, 2018"),Object(Y.a)(a,"temperature",17),Object(Y.a)(a,"weather","Mostly Cloudy"),a),foreCastHourly:[{time:0,rainProbability:0,temperature:0,icon:"wi-day-cloudy"},{time:0,rainProbability:0,temperature:0,icon:"wi-day-cloudy"},{time:0,rainProbability:0,temperature:0,icon:"wi-day-cloudy"},{time:0,rainProbability:0,temperature:0,icon:"wi-night-clear"},{time:0,rainProbability:0,temperature:14,icon:"wi-night-clear"}],foreCastDaily:[{weekDay:"mon",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"tue",rainProbability:0,icon:"wi-day-sunny",temperature:{max:0,min:0}},{weekDay:"wed",rainProbability:0,icon:"wi-night-alt-cloudy",temperature:{max:0,min:0}},{weekDay:"thu",rainProbability:0,icon:"wi-cloudy",temperature:{max:0,min:0}},{weekDay:"fri",rainProbability:0,icon:"wi-cloudy",temperature:{max:0,min:0}}]},Q=function(){function t(){Object(p.a)(this,t),this.ipFetcher=new B,this.ipGeoLocation=new H,this.data=Object(d.a)({},$),this.currentDate=new Date}return Object(f.a)(t,[{key:"update",value:function(){var t=this;if(!this.ipGeoLocation.data.error){var e=this.ipGeoLocation.data.forecast.forecastday[0].hour.filter((function(e){return e.time_epoch>t.currentDate.getTime()/1e3}));this.data={latitude:this.ipGeoLocation.data.location.lat,longitude:this.ipGeoLocation.data.location.lon,lastUpdate:this.getLastUpdate(this.currentDate),currentCondition:{location:this.ipGeoLocation.data.location.name,date:J(this.ipGeoLocation.data.location.localtime_epoch).localeDateString,temperature:Math.round(this.ipGeoLocation.data.current.temp_c),weather:this.ipGeoLocation.data.current.condition.text},foreCastHourly:e.slice(0,6).map((function(t){return{time:J(t.time_epoch).hours,rainProbability:t.chance_of_rain,temperature:Math.floor(t.temp_c),icon:t.is_day?"svg/day/".concat(X(t.condition.code),".png"):"svg/night/".concat(X(t.condition.code),".png")}})),foreCastDaily:this.ipGeoLocation.data.forecast.forecastday.slice(1,6).map((function(t){return{weekDay:K(J(t.date_epoch).weekDay),rainProbability:t.day.daily_chance_of_rain,icon:t.day.is_day?"svg/day/".concat(X(t.day.condition.code),".png"):"svg/night/".concat(X(t.day.condition.code),".png"),temperature:{max:Math.round(t.day.maxtemp_c),min:Math.round(t.day.mintemp_c)}}}))}}}},{key:"getLastUpdate",value:function(t){return"".concat(q(t.getHours()),":").concat(q(t.getMinutes()))}},{key:"_updateIP",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!localStorage.getItem("ip")){t.next=4;break}this.ipFetcher.ip=localStorage.getItem("ip"),t.next=7;break;case 4:return t.next=6,this.ipFetcher.fetch();case 6:this.ipFetcher.isValid()&&localStorage.setItem("ip",this.ipFetcher.ip);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_updateGeoLocation",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!localStorage.getItem("geoLocation")){t.next=4;break}this.ipGeoLocation.data=JSON.parse(localStorage.getItem("geoLocation")),t.next=7;break;case 4:return t.next=6,this.ipGeoLocation.fetch(this.ipFetcher.ip);case 6:this.ipGeoLocation.data.location.name&&localStorage.setItem("geoLocation",JSON.stringify(this.ipGeoLocation.data));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetch",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateCache()&&localStorage.clear(),t.next=3,this._updateIP();case 3:return t.next=5,this._updateGeoLocation();case 5:this.update();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateCache",value:function(){this.currentDate=new Date;var t=localStorage.getItem("lastupdate"),e=this.currentDate-new Date(t),n=Math.floor(e/1e3/60<<0),a=Math.floor(e/1e3%60);return n>58&&a>0}},{key:"getLocation",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.data.lastUpdate=this.getLastUpdate(this.currentDate),!this.updateCache()){t.next=9;break}return localStorage.clear(),localStorage.setItem("lastupdate",this.currentDate.toString()),t.next=6,this._updateIP();case 6:return t.next=8,this._updateGeoLocation();case 8:this.update();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),Z=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).loader=o.a.createRef(),t.onInfoClick=t.onInfoClick.bind(Object(y.a)(t)),t.onInfoClose=t.onInfoClose.bind(Object(y.a)(t)),t.onRefreshClick=t.onRefreshClick.bind(Object(y.a)(t)),t.onGPSLocationClick=t.onGPSLocationClick.bind(Object(y.a)(t)),t.storage=new Q,t.state=Object(d.a)({},t.storage.data),t}return Object(f.a)(n,[{key:"init",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(){return e.loader.current.animateIn()}),100),t.next=3,this.storage.fetch();case 3:w((function(){e.loader.current.animateOut(),w((function(){return e.updatedState(e.storage)}),600)}),1e3);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updatedState",value:function(t){var e=t.ipGeoLocation,n=t.data;e.data&&e.data.error?this.setState({error:e.data.error,dataLoaded:!0}):this.setState(Object(d.a)(Object(d.a)({},n),{},{showInfo:!1,dataLoaded:!0,updating:!1}))}},{key:"onGetCurrentLocation",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a,i=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.latitude,a=e.longitude,t.next=3,this.storage.getLocation(n,a);case 3:w((function(){return i.updatedState(i.storage)}),600);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onGPSLocationClick",value:function(){var t=this;this.state.updating||(this.setState({updating:!0}),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.onGetCurrentLocation(e.coords)})))}},{key:"onRefreshClick",value:function(){var t=this.storage.data,e=t.latitude,n=t.longitude;this.state.updating||(this.setState({updating:!0}),this.onGetCurrentLocation({latitude:e,longitude:n}))}},{key:"onInfoClick",value:function(){this.setState({showInfo:!0})}},{key:"onInfoClose",value:function(){this.setState({showInfo:!1})}},{key:"componentDidMount",value:function(){this.init()}},{key:"errorReachLimit",value:function(){return Object(i.jsx)(T,{})}},{key:"display",value:function(){return this.state.error?this.errorReachLimit():this.displayHome()}},{key:"displayHome",value:function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(z,{currentCondition:this.state.currentCondition,foreCastDaily:this.state.foreCastDaily,foreCastHourly:this.state.foreCastHourly,onInfoClick:this.onInfoClick,onGPSLocationClick:this.onGPSLocationClick,updating:this.state.updating,lastUpdate:this.state.lastUpdate,onRefreshClick:this.onRefreshClick}),Object(i.jsx)(F,{onInfoClose:this.onInfoClose,show:this.state.showInfo})]})}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"App",children:this.state.dataLoaded?this.display():Object(i.jsx)(U,{ref:this.loader})})}}]),n}(r.Component),tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function et(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}s.a.render(Object(i.jsx)(Z,{}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");tt?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):et(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):et(e,t)}))}}()}},[[21,1,2]]]);
//# sourceMappingURL=main.e9aeb5ab.chunk.js.map